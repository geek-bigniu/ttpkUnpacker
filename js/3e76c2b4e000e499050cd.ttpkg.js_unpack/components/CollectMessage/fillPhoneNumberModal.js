define("components/CollectMessage/fillPhoneNumberModal.js",(function(e,n,t,r,o,u,c,a,i,l,f,s,d,p,b,h,v,m,y,g,w,O,P,j,M,x,C,k,S,_,A,I,E){(global.webpackJsonp=global.webpackJsonp||[]).push([["components/CollectMessage/fillPhoneNumberModal"],{"253b":function(e,n,t){"use strict";var r=t("7145");t.n(r).a},"34b5":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){}));var r=function(){this.$createElement;this._self._c},o=[]},7145:function(e,n,t){},"7e1e":function(e,n,t){"use strict";t.r(n);var r=t("f3a8"),o=t.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(u);n.default=o.a},e671:function(e,n,t){"use strict";t.r(n);var r=t("34b5"),o=t("7e1e");for(var u in o)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(u);t("253b");var c=t("f0c5"),a=Object(c.a)(o.default,r.b,r.c,!1,null,"048fb6e7",null,!1,r.a,undefined);n.default=a.exports},f3a8:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=b(t("a34a")),a=t("dc04"),i=t("2485"),l=t("4360"),f=t("4260"),s=t("349c"),d=t("4260"),p=b(t("3284"));function b(e){return e&&e.__esModule?e:{default:e}}function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){m(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function y(e,n,t,r,u,c,a){try{var i=e[c](a),l=i.value}catch(e){return void t(e)}i.done?n(l):o.resolve(l).then(r,u)}function g(e){return function(){var n=this,t=arguments;return new o((function(r,o){var u=e.apply(n,t);function c(e){y(u,r,o,c,a,"next",e)}function a(e){y(u,r,o,c,a,"throw",e)}c(void 0)}))}}function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,u=[],c=!0,a=!1;try{for(t=t.call(e);!(c=(r=t.next()).done)&&(u.push(r.value),!n||u.length!==n);c=!0);}catch(e){a=!0,o=e}finally{try{c||null==t.return||t.return()}finally{if(a)throw o}}return u}}(e,n)||function(e,n){if(e){if("string"==typeof e)return O(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var P={components:{CommonModal:function(){t.e("components/CollectMessage/modal").then(function(){return resolve(t("0bce"))}.bind(null,t)).catch(t.oe)},CommonInput:function(){t.e("components/Input").then(function(){return resolve(t("1270"))}.bind(null,t)).catch(t.oe)},ButtonGroup:function(){t.e("components/CollectMessage/buttonGroup").then(function(){return resolve(t("9f5a"))}.bind(null,t)).catch(t.oe)}},setup:function(e,n){var t,o=n.emit,b=(0,a.reactive)({phone:"",code:"",sending:!1,focus:!1}),h=w((0,p.default)(),2),m=h[0],y=h[1].run,O=w((0,l.useContact)(),2)[1].handleBindPhone,P=(0,a.computed)((function(){return(0,f.isValidPhone)(b.phone)&&b.code})),j=(0,a.computed)((function(){return(0,f.isValidPhone)(b.phone)?(0,s.encryptPhone)(b.phone):""})),M=function(){return b.phone?!!(0,f.isValidPhone)(b.phone)||((0,d.toast)("请输入正确手机号"),!1):((0,d.toast)("请输入手机号"),!1)},x=function(){var e=g(r.default.mark((function e(){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.sending){e.next=2;break}return e.abrupt("return");case 2:if(!m.value){e.next=4;break}return e.abrupt("return",(0,d.toast)("发送频繁，请稍等重试"));case 4:if(!M()){e.next=11;break}return b.sending=!0,e.next=8,(0,i.sendCode)(j.value);case 8:n=e.sent,b.sending=!1,n&&y(60);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=g(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M()){e.next=8;break}if(b.code){e.next=4;break}return(0,d.toast)("请输入验证码"),e.abrupt("return");case 4:return e.next=6,O(j.value,b.code);case 6:e.sent&&((0,d.toast)({title:"手机号填写成功",type:"success",duration:2500}),o("success"));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return v(v({},(0,a.toRefs)(b)),{},{ensureUsable:P,countdown:m,handleInput:function(e,n){var t=n.target.value;b[e]=t.trim()},clearPhone:function(){return b.phone=""},handleSendCode:x,handleEnsure:C,handleBack:function(){return o("close")},handleFocus:function(){b.focus=!0,t&&(c(t),t=null)},handleBlur:function(){t||(t=u((function(){b.focus=!1,t=null}),200))},logShow:function(){return o("sendLog","other_mobile",{type:"show"})}})}};n.default=P}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["components/CollectMessage/fillPhoneNumberModal-create-component",{"components/CollectMessage/fillPhoneNumberModal-create-component":function(e,n,t){t("d1fe").createComponent(t("e671"))}},[["components/CollectMessage/fillPhoneNumberModal-create-component"]]])}));
//# sourceMappingURL=fillPhoneNumberModal.js.map