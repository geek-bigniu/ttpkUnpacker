define("components/RedEnvelope/Entry.js",(function(t,e,n,r,o,u,a,i,c,s,f,l,p,d,b,y,m,_,v,w,S,O,T,E,h,g,P,A,j,D,R,k,x){(global.webpackJsonp=global.webpackJsonp||[]).push([["components/RedEnvelope/Entry"],{"86ac":function(t,e,n){"use strict";n.r(e);var r=n("9b3f"),o=n.n(r);for(var u in r)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(u);e.default=o.a},"9b3f":function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.REWARD_THRESHOLD=void 0;var u=w(n("a34a")),a=n("ec46"),i=n("dc04"),c=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=v(e);if(n&&n.has(t))return n.get(t);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var i=u?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=t[a]}return o.default=t,n&&n.set(t,o),o}(n("f598")),s=n("1c3c"),f=n("806c"),l=w(n("dbcb")),p=n("1c3f"),d=n("4260"),b=w(n("6dd2")),y=n("5bf1"),m=n("5acd"),_=n("5aff");function v(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(v=function(t){return t?n:e})(t)}function w(t){return t&&t.__esModule?t:{default:t}}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n,r,u,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):o.resolve(s).then(r,u)}function E(t){return function(){var e=this,n=arguments;return new o((function(r,o){var u=t.apply(e,n);function a(t){T(u,r,o,a,i,"next",t)}function i(t){T(u,r,o,a,i,"throw",t)}a(void 0)}))}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,u=[],a=!0,i=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(u.push(r.value),!e||u.length!==e);a=!0);}catch(t){i=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var A=88.88;e.REWARD_THRESHOLD=A;var j={components:{Toast:function(){n.e("components/RedEnvelope/Toast").then(function(){return resolve(n("fdc98"))}.bind(null,n)).catch(n.oe)}},setup:function(){var t=!1,e=(0,i.reactive)({inited:!1,user_status:-1,total_reward_amount:0,popup_window:!1,remainTiming:{}}),n=g((0,c.default)(),2)[1].setOldPrimaryMissionEntry,r=g(getCurrentPages().reverse(),1)[0],o=(0,i.computed)((function(){var t,n=e.user_status,r=e.total_reward_amount;return(t={},h(t,s.STATUS_ONGOING,{title:r>A?"恭喜你被选为优质达人":"恭喜你获得新用户激励",subtitle:r>A?"获得现金激励":"",buttonText:"去做任务领红包",amount:r,popup_show:"novice",popup_click:"novice"}),h(t,s.STATUS_COMPLETED,{title:"新手任务已完成",subtitle:"恭喜获得",buttonText:"立即领取",amount:r,popup_show:"mission_complete",popup_click:"mission_complete"}),t)[n]})),v=(0,i.computed)((function(){return[s.STATUS_ONGOING,s.STATUS_COMPLETED,s.STATUS_PENDING].includes(e.user_status)&&!e.remainTiming.isZero})),w=(0,i.computed)((function(){return[s.STATUS_COMPLETED,s.STATUS_PENDING].includes(e.user_status)})),S=function(){e.user_status=-1,e.popup_window=!1},T=function(){var t=E(u.default.mark((function t(){var o,a,i,l,d,b,y;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.getMissionStatus)();case 2:o=t.sent,a=o.user_status,i=o.total_reward_amount,l=o.popup_window,d=o.start_time,e.user_status=a,e.total_reward_amount=i,e.popup_window=[s.STATUS_ONGOING,s.STATUS_COMPLETED].includes(a)&&l,14,b=(0,m.getAfterDays)(14),y=d+b,!e.inited&&(e.remainTiming=(0,f.useRemainTiming)(y,S)),e.inited=!0,"pages/index/index"===r.is&&n(e.popup_window?c.ENTRY_STATUS.show:c.ENTRY_STATUS.hide);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(){var n=E(u.default.mark((function n(){var r,o,i;return u.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.popup_window=!1,e.user_status!==s.STATUS_ONGOING){n.next=4;break}return(0,a.navigateTo)("/other-pages/talent-new-task/index"),n.abrupt("return");case 4:if(n.prev=4,!t){n.next=7;break}return n.abrupt("return");case 7:return t=!0,n.next=10,(0,p.applyPayment)();case 10:r=n.sent,o=r.status,i=r.message,t=!1,(0,y.report)("达人新手领取红包",{status:String(o),message:i}),o===s.RECEIVE_SUCCESS?((0,_.toast)("领取成功"),b.default.send("get_reward",{reward_money:(0,d.formatMoney)(e.total_reward_amount)}),T()):o===s.RECEIVE_PERIOD?(0,_.toast)("今天红包被抢光啦，请明天再来领取"):o===s.RECEIVE_PENDING?(0,_.toast)("打款进行中,请稍后再来"):(0,_.toast)("领取失败"),n.next=22;break;case 18:n.prev=18,n.t0=n.catch(4),t=!1,(0,_.toast)("领取失败");case 22:case"end":return n.stop()}}),n,null,[[4,18]])})));return function(){return n.apply(this,arguments)}}();return T(),(0,l.default)("onShow",(function(){e.inited&&![s.STATUS_OLD,s.STATUS_PAID,s.STATUS_EXPIRED].includes(e.user_status)&&T()})),O(O({},(0,i.toRefs)(e)),{},{showEntry:v,canClaimed:w,redEnvelopeInfo:o,handleConfirm:P,handleClose:function(){e.popup_window=!1},handleClick:function(){(0,a.navigateTo)("/other-pages/talent-new-task/index")}})}};e.default=j},b866:function(t,e,n){"use strict";n.r(e);var r=n("fb4e"),o=n("86ac");for(var u in o)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(u);n("e706");var a=n("f0c5"),i=Object(a.a)(o.default,r.b,r.c,!1,null,"064fa8dd",null,!1,r.a,undefined);e.default=i.exports},e706:function(t,e,n){"use strict";var r=n("fdc9");n.n(r).a},fb4e:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var r=function(){this.$createElement;this._self._c},o=[]},fdc9:function(t,e,n){}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["components/RedEnvelope/Entry-create-component",{"components/RedEnvelope/Entry-create-component":function(t,e,n){n("d1fe").createComponent(n("b866"))}},[["components/RedEnvelope/Entry-create-component"]]])}));
//# sourceMappingURL=Entry.js.map