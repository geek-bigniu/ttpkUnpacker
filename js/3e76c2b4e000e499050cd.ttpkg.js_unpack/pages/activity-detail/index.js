define("pages/activity-detail/index.js",(function(t,e,n,i,o,r,a,c,l,u,s,f,d,v,p,y,h,b,m,g,k,_,w,O,j,x,S,P,R,T,D,L,M){(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/activity-detail/index"],{1241:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var i=function(){this.$createElement;this._self._c},o=[]},"2ce6":function(t,e,n){"use strict";n.r(e);var i=n("1241"),o=n("6272");for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("8428");var a=n("f0c5"),c=Object(a.a)(o.default,i.b,i.c,!1,null,"e9eb7bd4",null,!1,i.a,undefined);e.default=c.exports},"5af4":function(t,e,n){"use strict";(function(t){function e(t){return t&&t.__esModule?t:{default:t}}n("6cdc"),e(n("dc04")),t(e(n("2ce6")).default)}).call(this,n("d1fe").createPage)},6272:function(t,e,n){"use strict";n.r(e);var i=n("774c"),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e.default=o.a},"774c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=p(n("a34a")),r=p(n("be60")),a=n("dc04"),c=n("ccaf"),l=n("0336"),u=n("4360"),s=n("4260"),f=p(n("6dd2")),d=n("5bf1"),v=n("5aff");function p(t){return t&&t.__esModule?t:{default:t}}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e,n,i,r,a,c){try{var l=t[a](c),u=l.value}catch(t){return void n(t)}l.done?e(u):o.resolve(u).then(i,r)}function g(t){return function(){var e=this,n=arguments;return new o((function(i,o){var r=t.apply(e,n);function a(t){m(r,i,o,a,c,"next",t)}function c(t){m(r,i,o,a,c,"throw",t)}a(void 0)}))}}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var w={components:{Back:function(){o.all([n.e("common/vendor"),n.e("components/Back")]).then(function(){return resolve(n("66b7"))}.bind(null,n)).catch(n.oe)},Banner:function(){n.e("pages/activity-detail/components/Banner").then(function(){return resolve(n("1335"))}.bind(null,n)).catch(n.oe)},Introduction:function(){o.all([n.e("common/vendor"),n.e("pages/activity-detail/components/Introduction")]).then(function(){return resolve(n("f298"))}.bind(null,n)).catch(n.oe)},Reward:function(){o.all([n.e("common/vendor"),n.e("pages/activity-detail/components/Reward")]).then(function(){return resolve(n("4148"))}.bind(null,n)).catch(n.oe)},Rank:function(){o.all([n.e("common/vendor"),n.e("pages/activity-detail/components/Rank")]).then(function(){return resolve(n("fbb6"))}.bind(null,n)).catch(n.oe)},HotVideo:function(){o.all([n.e("common/vendor"),n.e("pages/activity-detail/components/HotVideo")]).then(function(){return resolve(n("d479"))}.bind(null,n)).catch(n.oe)},TeachVideo:function(){o.all([n.e("common/vendor"),n.e("pages/activity-detail/components/TeachVideo")]).then(function(){return resolve(n("ed5c"))}.bind(null,n)).catch(n.oe)},Rules:function(){n.e("pages/activity-detail/components/Rules").then(function(){return resolve(n("1278"))}.bind(null,n)).catch(n.oe)},SubmitButton:function(){n.e("pages/activity-detail/components/SubmitButton").then(function(){return resolve(n("7e6a"))}.bind(null,n)).catch(n.oe)},AwardPublicity:function(){o.all([n.e("common/vendor"),n.e("pages/activity-detail/components/AwardPublicity")]).then(function(){return resolve(n("8079"))}.bind(null,n)).catch(n.oe)},MultipleTaskSelect:function(){o.all([n.e("common/vendor"),n.e("pages/activity-detail/components/MultipleTaskSelect")]).then(function(){return resolve(n("6da8"))}.bind(null,n)).catch(n.oe)}},setup:function(){var t=(0,s.getCurrentPageOptions)(),e=t.activity_id,n=t.location,p=t.launch_from,y=(0,a.reactive)({isIphoneX:(0,s.isIphoneX)(),activityDetail:{},rankList:[],videoList:[],pageReady:!1,multipleTaskModalShow:!1}),b=k((0,u.useGlobal)(),2),m=b[0].modalVisible;(0,b[1].toggleModal)(!1);var _=(0,a.computed)((function(){return"\n      background-color: ".concat(y.activityDetail.BackgroundColor||"#161823",";\n    ")})),w=6,O=function(){var t=g(i.default.mark((function t(){var n,o;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,c.getActivity)({activity_id:e});case 3:n=t.sent,o=n.reward_activity,console.log("getActivity -> reward_activity",o),y.activityDetail=o||{},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,d.reportError)("活动详情接口出错",{activity_id:e,err:t.t0},"fatal");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=g(i.default.mark((function t(){var n,o,r,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.getVideoList)({activity_id:e,offset:0,limit:w});case 2:if(n=t.sent,o=n.video_list,r=void 0===o?[]:o,a=n.has_more,!(r.length<6&&a)){t.next=12;break}return w+=6,t.next=10,j();case 10:t.next=14;break;case 12:console.log("getHotVideos -> videoList",r),y.videoList=r.slice(0,6);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=g(i.default.mark((function t(){var n,o,r,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={offset:0,limit:10,ranking_sort_type:y.activityDetail.RankingSortType,ranking_filter_type:y.activityDetail.RankingFilterType||0,activity_id:e},t.next=3,(0,l.getVideoRank)(n);case 3:o=t.sent,r=o.rank_list,a=void 0===r?[]:r,console.log("getRank -> rankList",a),y.rankList=a;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.default.showLoading({title:"加载中"}),o.all([O(),j()]).then((function(){return x()})).then((function(){r.default.hideLoading(),y.pageReady=!0,console.log("ac_type",y.activityDetail.TaskInfoList.length>1?"multi_ac":"single_ac"),f.default.send("ac_detail_show",{ac_id:y.activityDetail.ActivityId,launch_from:p,location:n,ac_type:y.activityDetail.TaskInfoList.length>1?"multi_ac":"single_ac"})})).catch((function(t){console.log("err",t),r.default.hideLoading(),(0,v.toast)("加载失败！请稍后再试")})),h(h({},(0,a.toRefs)(y)),{},{background:_,modalVisible:m,handleModalClose:function(){y.multipleTaskModalShow=!1},handleMultipleTaskBtnClick:function(){y.multipleTaskModalShow=!0}})}};e.default=w},8428:function(t,e,n){"use strict";var i=n("b5b3");n.n(i).a},b5b3:function(t,e,n){}},[["5af4","common/runtime","common/vendor"]]])}));
//# sourceMappingURL=index.js.map