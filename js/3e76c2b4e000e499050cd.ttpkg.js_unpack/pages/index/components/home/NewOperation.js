define("pages/index/components/home/NewOperation.js",(function(e,t,n,r,a,o,u,i,c,s,f,l,d,p,m,b,v,g,h,k,_,O,y,w,x,j,P,T,C,N,I,E,R){(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/index/components/home/NewOperation"],{"144f":function(e,t,n){},"1ee1":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var r=function(){var e=this,t=(e.$createElement,e._self._c,e.showOperation?e.formatNumber(e.video.count):null),n=e.showOperation?e.formatNumber(e.game.count):null,r=e.showOperation?e.__map(e.rankList.slice(0,3),(function(t,n){return{$orig:e.__get_orig(t),a0:{icon:t.game_icon_url,name:t.game_name,index:n,tags:t.game_tags,task_id:t.task_id}}})):null;e.$mp.data=Object.assign({},{$root:{m0:t,m1:n,l0:r}})},a=[]},"52c5":function(e,t,n){"use strict";n.r(t);var r=n("ad0e"),a=n("e88c");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("e6f6");var u=n("f0c5"),i=Object(u.a)(a.default,r.b,r.c,!1,null,"8bb6e50a",null,!1,r.a,undefined);t.default=i.exports},5336:function(e,t,n){"use strict";n.r(t);var r=n("cf06"),a=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t.default=a.a},"554b":function(e,t,n){},ad0e:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var r=function(){var e=this,t=(e.$createElement,e._self._c,e.__map(Object.keys(e.TextMap),(function(t,n){return{$orig:e.__get_orig(t),m0:Number(t),m1:Number(t)}})));e._isMounted||(e.e0=function(t,n){var r=arguments[arguments.length-1].currentTarget.dataset,a=r.eventParams||r["event-params"];return n=a.k,e.handleTabChange(n)}),e.$mp.data=Object.assign({},{$root:{l0:t}})},a=[]},b326:function(e,t,n){"use strict";n.r(t);var r=n("1ee1"),a=n("5336");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("c426");var u=n("f0c5"),i=Object(u.a)(a.default,r.b,r.c,!1,null,"222df949",null,!1,r.a,undefined);t.default=i.exports},c1cd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TabEnum=void 0;var r,o=d(n("a34a")),u=d(n("7ee8")),i=n("ec46"),c=n("dc04"),s=n("8e44"),f=n("5bf1"),l=d(n("3d4b"));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n,r,o,u,i){try{var c=e[u](i),s=c.value}catch(e){return void n(e)}c.done?t(s):a.resolve(s).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new a((function(r,a){var o=e.apply(t,n);function u(e){b(o,r,a,u,i,"next",e)}function i(e){b(o,r,a,u,i,"throw",e)}u(void 0)}))}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={ContributorCount:1,IncomePeopleCount:2,IncomeIncrease:3};t.TabEnum=h;var k=(g(r={},h.ContributorCount,{tabText:"投稿人数榜",tips:"按昨日任务投稿人数由高至低排行",tabName:"publish_rank"}),g(r,h.IncomePeopleCount,{tabText:"收益人数榜",tips:"按投稿任务后获得收益的人数由高至低排行",tabName:"profit_rank"}),g(r,h.IncomeIncrease,{tabText:"收益飙升榜",tips:"按任务投稿总收益对比前日提升幅度由高至低排行",tabName:"profit_boosting_rank"}),r),_={components:{Back:function(){a.all([n.e("common/vendor"),n.e("components/Back")]).then(function(){return resolve(n("66b7"))}.bind(null,n)).catch(n.oe)},RankItem:function(){a.all([n.e("common/vendor"),n.e("pages/daily_rank/components/RankItem")]).then(function(){return resolve(n("6918"))}.bind(null,n)).catch(n.oe)}},setup:function(){var e,t=(0,l.default)(),n=t.rankPageShowLog,r=t.cardClickLog,a=t.cardShowLog,d=t.missionClickLog,p=t.missionShowLog,b=(0,c.reactive)({tab:h.ContributorCount,list:(e={},g(e,h.ContributorCount,[]),g(e,h.IncomePeopleCount,[]),g(e,h.IncomeIncrease,[]),e),inited:!1}),_=function(){var e=v(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.getGameTaskRank)({rank_types:t});case 3:if(n=e.sent,!(0,u.default)(n)&&!(0,u.default)(n.ranks)){e.next=7;break}return(0,f.reportError)("getGameTaskRankList 接口返回为空",{},"fatal"),e.abrupt("return",{ranks:{}});case 7:return e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),(0,f.reportError)("getGameTaskRankList 接口报错",{err:e.t0},"fatal"),console.error("getGameTaskRankList 接口报错",e.t0),e.abrupt("return",{ranks:{}});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=v(o.default.mark((function e(){var t,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_([h.ContributorCount,h.IncomePeopleCount,h.IncomeIncrease]);case 2:t=e.sent,r=(t||{ranks:{}}).ranks,Object.keys(r).forEach((function(e){b.list[e]=r[e]||[]})),n(k[b.tab].tabName);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=v(o.default.mark((function e(t){var r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(k[t].tabName),b.list[t]&&b.list[t].length){e.next=7;break}return e.next=4,_([Number(t)]);case 4:r=e.sent,a=r.ranks,b.list[t]=a[t];case 7:b.tab=Number(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return O().then((function(){b.inited=!0})),m(m({},(0,c.toRefs)(b)),{},{TextMap:k,handleTabChange:y,handleItemClick:function(e){var t={tab_name:k[b.tab].tabName,mission_id:e.task_id,game_id:e.game_id,game_name:e.game_name,card_id:e.rank_number};r(t),d(t),(0,i.navigateTo)("/pages/detail/index",{task_id:e.task_id,pre_location:"daily_rank",inside:!0,extraLogParams:JSON.stringify({rank:e.rank_number,rank_name:k[b.tab].tabName})})},itemShowLog:function(e){var t={tab_name:k[b.tab].tabName,mission_id:e.task_id,game_id:e.game_id,game_name:e.game_name,card_id:e.rank_number};a(t),p(t)},TabEnum:h})}};t.default=_},c426:function(e,t,n){"use strict";var r=n("554b");n.n(r).a},cf06:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=v(n("a34a")),o=v(n("7ee8")),u=n("ec46"),i=n("dc04"),c=n("52c5"),s=n("8e44"),f=n("4360"),l=n("9d61"),d=n("96b2"),p=n("292c"),m=v(n("6dd2")),b=n("5bf1");function v(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n,r,o,u,i){try{var c=e[u](i),s=c.value}catch(e){return void n(e)}c.done?t(s):a.resolve(s).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new a((function(r,a){var o=e.apply(t,n);function u(e){_(o,r,a,u,i,"next",e)}function i(e){_(o,r,a,u,i,"throw",e)}u(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){i=!0,a=e}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t=1e8;return e<1e4?e:e<t?(e/1e4).toFixed(1)+"万":(e/t).toFixed(1)+"亿"},j={components:{OperationSkeleton:function(){n.e("pages/index/components/home/Skeleton/OperationSkeleton").then(function(){return resolve(n("47a5"))}.bind(null,n)).catch(n.oe)},RankUnit:function(){n.e("components/RankUnit").then(function(){return resolve(n("8097"))}.bind(null,n)).catch(n.oe)}},setup:function(){var e=(0,i.reactive)({video:null,game:null,rankList:[],inited:!1}),t=y((0,f.useHomeTab)(),2)[1].setAcademy,n=y((0,l.useTab)(),2)[1].setTab,v=y((0,l.useRanking)(),2)[1].setRankingTab,g=(0,i.computed)((function(){var t=e.video,n=e.game,r=e.inited,a=e.rankList;return t&&n&&a.length&&r})),k=c.TabEnum.ContributorCount,_=function(){var e=O(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.getGameTaskRank)({rank_types:[k]});case 3:return t=e.sent,(0,o.default)(t)&&(0,b.reportError)("getGameTaskRankList 接口返回为空",{},"fatal"),e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),(0,b.reportError)("getGameTaskRankList 接口报错",{err:e.t0},"fatal"),console.error("getGameTaskRankList 接口报错",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=O(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.getOperation)();case 3:return t=e.sent,(0,o.default)(t)&&(0,b.reportError)("getOperation接口返回空",{},"fatal"),e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),console.log("getOperationData ~ error",e.t0),(0,b.reportError)("getOperation接口出错",{error:e.t0},"fatal");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var t=O(r.default.mark((function t(){var n,o,u,i,c,s,f,l;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.all([_(),w()]);case 2:n=t.sent,o=y(n,2),u=o[0],i=o[1],c=(u||{ranks:{}}).ranks,f=(s=i||{}).video,l=s.game,e.video=f,e.game=l,e.rankList=c[k]||[],e.inited=!0;case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(e){return m.default.send("index_module_click",{module_type:"home_module",page_name:"index",tab_name:e})},T=function(e,t){return/\/pages\/detail\/index/.test(e)&&(e+="&pre_location=".concat(t,"&inside=true")),e};return j().then((function(){g.value&&m.default.send("index_module_show",{module_type:"home_module",page_name:"index"})})),h(h({},(0,i.toRefs)(e)),{},{showOperation:g,formatNumber:x,handleVideoClick:function(e,r){(e=T(e,r))?(0,u.openPageOrHttpOrSchema)(e):(t({logParams:{launch_from_tab:"video"}}),n(p.AcademyTab.RANKING),v(d.RankingTab.VIDEO)),P("video")},handleGameClick:function(e,t){(e=T(e,t))&&(0,u.openPageOrHttpOrSchema)(e),P("game")},handleRankClick:function(){(0,u.navigateTo)("/pages/daily_rank/index"),P("daily_rank")}})}};t.default=j},e6f6:function(e,t,n){"use strict";var r=n("144f");n.n(r).a},e88c:function(e,t,n){"use strict";n.r(t);var r=n("c1cd"),a=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t.default=a.a}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["pages/index/components/home/NewOperation-create-component",{"pages/index/components/home/NewOperation-create-component":function(e,t,n){n("d1fe").createComponent(n("b326"))}},[["pages/index/components/home/NewOperation-create-component"]]])}));
//# sourceMappingURL=NewOperation.js.map