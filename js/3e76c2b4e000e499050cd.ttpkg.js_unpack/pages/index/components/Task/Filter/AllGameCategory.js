define("pages/index/components/Task/Filter/AllGameCategory.js",(function(e,t,a,r,n,o,u,l,c,i,s,m,p,y,f,g,d,b,v,S,_,h,k,T,w,C,x,O,N,A,G,j,I){(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/index/components/Task/Filter/AllGameCategory"],{"289a":function(e,t,a){"use strict";a.r(t);var r=a("6ff3"),n=a.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t.default=n.a},5841:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var r=function(){var e=this,t=(e.$createElement,e._self._c,[0,1].includes(e.query.mockSubIndex));e.$mp.data=Object.assign({},{$root:{g0:t}})},n=[]},"6ff3":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=m(a("a34a")),o=a("dc04"),u=a("267e"),l=a("8e44"),c=a("4360"),i=a("4260"),s=m(a("6dd2"));function m(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t,a,r,o,u,l){try{var c=e[u](l),i=c.value}catch(e){return void a(e)}c.done?t(i):n.resolve(i).then(r,o)}function b(e){return function(){var t=this,a=arguments;return new n((function(r,n){var o=e.apply(t,a);function u(e){d(o,r,n,u,l,"next",e)}function l(e){d(o,r,n,u,l,"throw",e)}u(void 0)}))}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o=[],u=!0,l=!1;try{for(a=a.call(e);!(u=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){l=!0,n=e}finally{try{u||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return _(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var h={AllGame:"",MobileGame:1,MiniGame:2},k=[{key:h.AllGame,title:"全部游戏",type:"all_game"},{key:h.MobileGame,title:"手游",type:"mobile_game"},{key:h.MiniGame,title:"小游戏",type:"micro_game"}],T={props:{selected:{type:String,default:null},showMask:{type:Boolean,default:null}},setup:function(e,t){var a=t.emit,n=(0,o.getCurrentInstance)(),m=(0,o.ref)([]),p=(0,o.ref)(!1),f=(0,o.ref)(!1),d=(0,o.ref)(!1),S=(0,o.reactive)({scrollTop:0}),_=(0,i.debounce)((function(e){S.scrollTop=e.detail.scrollTop}),500,!0,!0),T=(0,o.reactive)({gameType:"",gameSubType:"",gameSubName:"",mockSubIndex:-1}),w=(0,o.reactive)({gameName:"",gameSubName:""}),C=v((0,c.useHomeTasks)(),2)[1],x=C.reload,O=C.setLoggerInfo,N=C.setFiltered,A=(0,i.getCurrentPageOptions)(),G=A.task_type,j=void 0===G?0:G,I=A.page_id,M=void 0===I?"":I,P=function(){var e=b(r.default.mark((function e(t){var a,n,o,c,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.value.length||t!==m.value[0].GameType){e.next=3;break}return f.value=!0,e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,l.getGameCategory)({talent_page_id:M||(1===Number(j)?u.defaultTalentPageId:""),game_type:t});case 6:n=e.sent,o=n.game_category_info_list,c=void 0===o?[]:o,m.value=[],i={key:t,GameType:t,SecondCategoryId:"",SecondCategoryName:t===h.MiniGame?"全部小游戏":"全部手游",TaskCount:c.reduce((function(e,t){return e+t.TaskCount}),0)},m.value.push(i),(a=m.value).push.apply(a,g(c)),T.gameSubType=m.value[0].SecondCategoryId,T.gameSubName=m.value[0].SecondCategoryName,e.next=23;break;case 17:e.prev=17,e.t0=e.catch(3),T.gameSubType="",T.gameSubName=t===h.MiniGame?"全部小游戏":"全部手游",m.value=[{SecondCategoryId:"",SecondCategoryName:T.gameSubName}],console.log("getGameSubCategory -> error",e.t0);case 23:f.value=!0;case 24:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=b(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.gameType=t.key,w.gameName=t.type,n.parent.refs.gameCategory.query.gameType=t.key,n.parent.refs.filterCategory.query.gameType=t.key,d.value=!1,t.key!==h.AllGame){e.next=20;break}return p.value=!1,f.value=!1,T.gameSubType="",T.gameSubName="",T.mockSubIndex=-1,m.value=[],s.default.send("game_category_click_all_game",{category_type_first:w.gameName}),O({filterType:w.gameName,categoryType:w.gameName,categorySubType:""}),e.next=16,x({game_type_list:"",game_secondary_type_list:"",game_second_category_id:""});case 16:N(!1),a("onSelected",{show:p.value,type:"all"}),e.next=23;break;case 20:P(t.key),a("scroll",{hidden:!0}),S.scrollTop=0;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=b(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.value=!0,p.value=!1,T.gameSubType=t.SecondCategoryId,T.gameSubName=t.SecondCategoryName,w.gameSubType=t.SecondCategoryId,w.gameSubName=t.SecondCategoryName,s.default.send("game_category_click",{category_type_first:w.gameName,category_type_second:w.gameSubName}),O({filterType:w.gameName,categoryType:w.gameName,categorySubType:w.gameSubName||""}),e.next=10,x({game_type_list:T.gameType,game_secondary_type_list:"",game_second_category_id:T.gameSubType});case 10:n.parent.refs.gameCategory.query.mobileType="",N(!0),a("onSelected",{show:p.value,type:"all"}),a("scroll",{hidden:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.watchEffect)((function(){"all"===e.selected&&e.showMask||(p.value=!1),e.showMask||!f.value||d.value||q(m.value[0])})),y(y({},(0,o.toRefs)(S)),{},{scroll:_,query:T,queryLog:w,handleMainClick:E,handleSubClick:q,mockSubCategories:[{key:1,title:"全部手游",type:"mobile_game"},{key:2,title:"全部小游戏",type:"micro_game"}],ALL_CATEGORY_GAME_TYPE:h,categories:k,subCategories:m,showExpand:p,showSub:f,handleExpandClick:function(){p.value=!p.value,T.gameType?T.gameType!==h.AllGame&&-1!==T.mockSubIndex&&P(T.gameType):T.gameType=h.AllGame,a("onSelected",{show:p.value,type:"all",expand:!0})}})}};t.default=T},a3a0:function(e,t,a){"use strict";a.r(t);var r=a("5841"),n=a("289a");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("b974");var u=a("f0c5"),l=Object(u.a)(n.default,r.b,r.c,!1,null,"554cd7e7",null,!1,r.a,undefined);t.default=l.exports},b035:function(e,t,a){},b974:function(e,t,a){"use strict";var r=a("b035");a.n(r).a}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["pages/index/components/Task/Filter/AllGameCategory-create-component",{"pages/index/components/Task/Filter/AllGameCategory-create-component":function(e,t,a){a("d1fe").createComponent(a("a3a0"))}},[["pages/index/components/Task/Filter/AllGameCategory-create-component"]]])}));
//# sourceMappingURL=AllGameCategory.js.map