define("pages/detail/index.js",(function(e,n,t,o,r,a,i,c,s,u,l,d,f,p,v,h,m,g,b,_,w,y,x,P,k,S,O,C,T,E,j,I,M){(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/detail/index"],{"086e":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){this.$createElement;this._self._c},r=[]},"301f":function(e,n,t){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}t("6cdc"),n(t("dc04")),e(n(t("7460")).default)}).call(this,t("d1fe").createPage)},"336f":function(e,n,t){"use strict";var o=t("a8cf");t.n(o).a},"33ca":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=y(t("a34a")),i=t("ec46"),c=y(t("be60")),s=t("dc04"),u=t("267e"),l=t("7b8a"),d=y(t("dbcb")),f=t("ccaf"),p=t("d087"),v=t("cb9b"),h=t("4360"),m=t("4260"),g=y(t("6dd2")),b=t("7ee6"),_=t("5bf1"),w=t("5aff");function y(e){return e&&e.__esModule?e:{default:e}}function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){k(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function S(e,n,t,o,a,i,c){try{var s=e[i](c),u=s.value}catch(e){return void t(e)}s.done?n(u):r.resolve(u).then(o,a)}function O(e){return function(){var n=this,t=arguments;return new r((function(o,r){var a=e.apply(n,t);function i(e){S(a,o,r,i,c,"next",e)}function c(e){S(a,o,r,i,c,"throw",e)}i(void 0)}))}}function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,r,a=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(o=t.next()).done)&&(a.push(o.value),!n||a.length!==n);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==t.return||t.return()}finally{if(c)throw r}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}var E={components:{CommonModal:function(){t.e("components/CommonModal").then(function(){return resolve(t("ce2b"))}.bind(null,t)).catch(t.oe)},SkeletonView:function(){t.e("pages/detail/components/SkeletonView").then(function(){return resolve(t("43f0"))}.bind(null,t)).catch(t.oe)},Operation:function(){r.all([t.e("common/vendor"),t.e("pages/detail/components/Operation/index")]).then(function(){return resolve(t("41d6"))}.bind(null,t)).catch(t.oe)},NewTaskEntry:function(){r.all([t.e("common/vendor"),t.e("components/NewTaskEntry")]).then(function(){return resolve(t("285d"))}.bind(null,t)).catch(t.oe)},TalentNewTask:function(){r.all([t.e("common/vendor"),t.e("components/RedEnvelope/index")]).then(function(){return resolve(t("178c"))}.bind(null,t)).catch(t.oe)},NavigationBar:function(){r.all([t.e("common/vendor"),t.e("pages/detail/components/NavigationBar")]).then(function(){return resolve(t("d4bc"))}.bind(null,t)).catch(t.oe)},BasicInfo:function(){t.e("pages/detail/components/BasicInfo/index").then(function(){return resolve(t("8b9f"))}.bind(null,t)).catch(t.oe)},Extension:function(){t.e("pages/detail/components/Extension/index").then(function(){return resolve(t("da11"))}.bind(null,t)).catch(t.oe)},SharePoster:function(){r.all([t.e("common/vendor"),t.e("pages/detail/components/SharePoster")]).then(function(){return resolve(t("eaf4"))}.bind(null,t)).catch(t.oe)},CollectMessage:function(){t.e("components/CollectMessage/index").then(function(){return resolve(t("cc75"))}.bind(null,t)).catch(t.oe)},GuideBanner:function(){r.all([t.e("common/vendor"),t.e("pages/detail/components/GuideBanner")]).then(function(){return resolve(t("c408"))}.bind(null,t)).catch(t.oe)}},onPageScroll:function(e){l.detailEvent.publish(e)},setup:function(){a((function(){"ad_feed"===(0,m.getCurrentPageOptions)().pre_location&&tt.sendtoTAQ({convert_id:"1695915636667406",event_type:"in_app_detail_uv"})}));var e=(0,s.reactive)({inited:!1,activityList:[],qrcode:"",showPoster:!1,showErrToast:!1,collectModal:!1,bannerShow:!1}),n=C((0,h.useGlobal)(),2),t=n[0].modalVisible;(0,n[1].toggleModal)(!1);var l=(0,m.getCurrentPageOptions)(),y=l.task_id,x=void 0===y?"":y,k=l.inside,S=l.share_scan,T=l.pre_location,E=l.recommendType,j=void 0===E?null:E,I=l.isLive,M=void 0!==I&&I,L=l.if_resources,A=l.recommend_reason,U=l.extraLogParams,B=void 0===U?"{}":U,D=C((0,h.useDetailTab)(),2)[1],G=D.initTab,N=D.setFromHall,F=!k;N(F);var R=T;!0===S?R="scan_mission_intro":F?R="ac_calender":j?R=(0,b.getLaunchRecommendFrom)(j,M):"mission_list"===T&&L&&(R="resources"),G(x,R,A,(0,m.deserialize)(B));var V=C((0,h.useSlideConfig)(),2)[1].load,J=C((0,h.useSocialConfig)(),2)[1].load;F&&(V(),J());var q=C((0,h.useMessage)(),2),Q=q[0].msgInited,$=q[1];$.load(),(0,d.default)("onShow",(function(){Q.value&&$.load()}));var z=C((0,h.useTaskDetail)(),2),H=z[0],K=H._ttLogId,W=H.taskDetail,X=H.showExpireToast,Y=H.showInvalidToast,Z=H.canUploadCode,ee=z[1],ne=ee.load,te=ee.setLoading,oe=ee.setShowExpireToast,re=ee.getLimitJudgeCode,ae=ee.setCanUploadCode;(0,C((0,h.useLicense)(),2)[1].getUserGrant)(),C((0,h.useServerTime)(),2)[1].load();var ie=function(){var n=O(o.default.mark((function n(){var t,r,a;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.getActivityTasks)({offset:0,limit:1,task_id:x,processing_status_list:"2"});case 2:t=n.sent,r=t.TaskCardList,a=void 0===r?[]:r,e.activityList=a;case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();g.default.enterPage("mission_detail");var ce=function(){r.all([re(),ne(),ie()]).catch((function(n){console.log("detail -> init",n),e.showErrToast=!0,te(!1)})).finally((function(){e.inited=!0}))};x?((0,p.rtEvent)({event_name:"mission_click",task_id:String(x)}),ce()):(oe(!0),console.log("taskId 为空",l),(0,_.reportError)("taskId 为空",{pageOptions:JSON.stringify(l)}));var se={task_id:x,b_f:"s",share_scan:!0},ue=!1,le=function(){var n=O(o.default.mark((function n(){var t,r;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!ue){n.next=2;break}return n.abrupt("return");case 2:if(g.default.send("mission_share",{mission_id:x,game_id:W.value.GameId}),W.value.TaskStatus!==u.TASK_OFFLINE){n.next=6;break}return(0,w.toast)("该任务已下架!"),n.abrupt("return");case 6:return n.prev=6,ue=!0,c.default.showLoading({title:"加载中"}),t=encodeURIComponent((0,i.setURLParams)("pages/detail/index",se)),n.next=12,(0,v.getQrcode)({path:t});case 12:r=n.sent,c.default.hideLoading(),e.qrcode=r,n.next=23;break;case 17:return n.prev=17,n.t0=n.catch(6),console.log("openSharePoster -> error",n.t0),(0,w.toast)("生成邀请卡失败！请重试"),(0,_.reportError)("生成邀请卡失败",{landingPageOptions:se,error:n.t0},"fatal"),n.abrupt("return");case 23:ue=!1,e.showPoster=!0,g.default.send("mission_share_popup",{mission_id:x,game_id:W.value.GameId});case 26:case"end":return n.stop()}}),n,null,[[6,17]])})));return function(){return n.apply(this,arguments)}}(),de=function(){var n=O(o.default.mark((function n(t){return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return g.default.send("mission_share_save",{mission_id:x,game_id:W.value.GameId}),n.prev=1,n.next=4,c.default.saveImageToPhotosAlbum({filePath:t});case 4:(0,w.toast)("保存图片成功！"),e.showPoster=!1,(0,_.report)("保存分享图片成功"),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),e.showPoster=!1,(0,w.toast)("保存图片失败！"),(0,_.report)("保存分享图片失败");case 14:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),fe=C((0,h.useCollectMessage)(),2),pe=fe[0],ve=pe.collectModalVisible,he=pe.needPopupPhoneModal,me=pe.triggerForClick,ge=fe[1],be=ge.closeCollectModal,_e=ge.collectSuccess,we=ge.handleAutoShow,ye=ge.load;if(O(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=F,!e.t0){e.next=4;break}return e.next=4,ye(!0);case 4:he.value&&(we(F),(0,s.onBeforeUnmount)(be));case 5:case"end":return e.stop()}}),e)})))(),F){var xe=C((0,h.useContact)(),2),Pe=xe[0].phone,ke=xe[1].getContacts;O(o.default.mark((function n(){return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ke();case 2:Pe.value||(e.bannerShow=!0);case 3:case"end":return n.stop()}}),n)})))()}return P(P({fromPage:(0,s.computed)((function(){return F?me.value?"extend_landing_page_guide":"extend_landing_page":"mission_intro"})),showExpireToast:X,showInvalidToast:Y},(0,s.toRefs)(e)),{},{canUploadCode:Z,taskId:x,handleExpireConfirm:function(){(0,m.handleBack)()},handlePublishSuccess:function(){K.value&&Z.value!==u.thresholdStatus.Success&&!1===W.value.CanSchedulePublish&&(0,_.reportError)("发布器参数异常， canUploadCode 为 ".concat(Z.value," 但是发布了视频"),{"x-tt-logid":K.value}),ae(2)},handleRefresh:function(){e.showErrToast=!1,ce()},modalVisible:t,openSharePoster:le,handleShare:de,hidePoster:function(){return e.showPoster=!1},collectModalVisible:ve,triggerForClick:me,closeCollectModal:be,collectSuccess:_e})}};n.default=E},"40ac":function(e,n,t){"use strict";t.r(n);var o=t("33ca"),r=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n.default=r.a},7460:function(e,n,t){"use strict";t.r(n);var o=t("086e"),r=t("40ac");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("336f");var i=t("f0c5"),c=Object(i.a)(r.default,o.b,o.c,!1,null,"7dae3c22",null,!1,o.a,undefined);n.default=c.exports},a8cf:function(e,n,t){}},[["301f","common/runtime","common/vendor"]]])}));
//# sourceMappingURL=index.js.map