define("pages/detail/components/SharePoster.js",(function(t,e,r,n,o,c,a,i,l,f,u,d,s,p,v,h,b,g,m,x,w,y,S,T,k,P,O,C,j,z,B,W,F){(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/detail/components/SharePoster"],{"13fd":function(t,e,r){"use strict";r.r(e);var n=r("7752"),o=r.n(n);for(var c in n)["default"].indexOf(c)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(c);e.default=o.a},"2a077":function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){}));var n=function(){this.$createElement;this._self._c},o=[]},"388c":function(t,e,r){},"3a50":function(t,e,r){"use strict";var n=r("388c");r.n(n).a},7752:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=p(r("a34a")),c=p(r("ec41")),a=p(r("be60")),i=r("dc04"),l=r("4360"),f=r("4260"),u=p(r("6bb6")),d=r("5bf1"),s=r("5aff");function p(t){return t&&t.__esModule?t:{default:t}}function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t,e,r,n,c,a,i){try{var l=t[a](i),f=l.value}catch(t){return void r(t)}l.done?e(f):o.resolve(f).then(n,c)}function m(t){return function(){var e=this,r=arguments;return new o((function(n,o){var c=t.apply(e,r);function a(t){g(c,n,o,a,i,"next",t)}function i(t){g(c,n,o,a,i,"throw",t)}a(void 0)}))}}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,c=[],a=!0,i=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(c.push(n.value),!e||c.length!==e);a=!0);}catch(t){i=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var y={props:{show:Boolean,qrcode:{type:String,default:null}},setup:function(t,e){var r=e.emit,o=x((0,l.useTaskDetail)(),1)[0].taskDetail,p=(0,i.reactive)({posterUrl:""}),v=function(){r("close")},b=function(t){return a.default.downloadFile({url:t}).then((function(e){return 200===e.statusCode?e.tempFilePath:t})).catch((function(){return t}))},g=function(){var e=m(n.default.mark((function e(){var r,i,l,h,g,x,w,y,S,T,k,P,O,C,j,z,B,W,F,I,U;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="poster",i=o.value.GameTags,l=(0,f.formatTaskStat)(o.value,{limitWidth:!0}),h=l.sixtyMoney,g=l.sixtyUnit,x={money:h,unit:g},w=String((0,c.default)(o.value,"TaskStat.UserCount",0)),e.next=7,b(o.value.Poster);case 7:y=e.sent,(S=new u.default({scale:1,canvasId:r})).createArtboard({id:"artboard",backgroundColor:"#FFFFFF",width:(0,f.convert)(280),height:(0,f.convert)(433)}).drawImage({id:"background",left:0,top:0,path:"https://p1.dailygn.com/tos-cn-i-8vc7tlzf3c/dc4b32d69cd046e6aff64ac267bcd039~tplv-8vc7tlzf3c-raw.png",width:(0,f.convert)(280),height:(0,f.convert)(433)}).createRectangle({id:"gameIcon",path:y,top:(0,f.convert)(62),left:(0,f.convert)(30),width:(0,f.convert)(56),height:(0,f.convert)(56),radius:(0,f.convert)(8)}).drawWrapText({id:"gameName",fontSize:(0,f.convert)(14),fontStyle:"bold",text:o.value.TaskName,maxLine:1,left:(0,f.convert)(30),referLayer:{id:"gameIcon",top:(0,f.convert)(10)},color:"#15171D"}),T=(0,f.convert)(30),k=(0,f.convert)(156),P=1,O=(0,f.convert)(250),C=(0,f.convert)(8),j=(0,f.convert)(16),z=0;case 13:if(!(z<i.length)){e.next=27;break}if(B=S.getTextWidth({text:i[z],fontSize:(0,f.convert)(10)}),!(T+(W=B+2*C)>O)){e.next=22;break}if(!(++P>2)){e.next=20;break}return e.abrupt("break",27);case 20:T=(0,f.convert)(30),k=k+j+(0,f.convert)(6);case 22:S.createRectangle({id:"tag-".concat(z),left:T,top:k,height:j,width:W,backgroundColor:"#F5F5F5",radius:(0,f.convert)(4)}).drawWrapText({id:"tagText-".concat(z),left:T+C,top:k+(0,f.convert)(1.5),text:i[z],fontSize:(0,f.convert)(10),color:"#B0B0B0"}),T+=W+(0,f.convert)(6);case 24:z++,e.next=13;break;case 27:F=S.getTextWidth({text:x.money,fontSize:(0,f.convert)(24)})/(0,f.convert)(82),I=F>1?Math.floor((0,f.convert)(24)/F):(0,f.convert)(24),U="#15171d",S.drawWrapText({id:"partText",left:(0,f.convert)(30),top:(0,f.convert)(204),text:"参与任务",fontSize:(0,f.convert)(10),color:"#B0B0B0"}).drawWrapText({id:"peopleNumber",left:(0,f.convert)(30),top:(0,f.convert)(224),width:(0,f.convert)(76),text:w,fontSize:I,fontStyle:"bold",color:U}).drawWrapText({id:"peopleText",text:"人",fontSize:(0,f.convert)(14),fontStyle:"bold",color:U,referLayer:{id:"peopleNumber",left:(0,f.convert)(5),top:-(0,f.convert)(15)}}).drawWrapText({id:"maxProfitText",left:(0,f.convert)(156),top:(0,f.convert)(204),text:"当前最高收益",fontSize:(0,f.convert)(10),color:"#B0B0B0"}).drawWrapText({id:"maxProfit",left:(0,f.convert)(156),top:(0,f.convert)(x.unit?224:230),text:x.money,fontSize:x.unit?I:(0,f.convert)(16),fontStyle:"bold",color:U}),x.unit&&S.drawWrapText({id:"maxProfitUnitText",text:x.unit,fontSize:(0,f.convert)(14),fontStyle:"bold",color:U,referLayer:{id:"maxProfit",left:(0,f.convert)(5),top:-(0,f.convert)(15)}}),S.createRectangle({id:"verticalLine",left:(0,f.convert)(138),top:(0,f.convert)(206),width:.2,height:(0,f.convert)(40),backgroundColor:"#CCCCCC"}).createRectangle({id:"horizonLine",left:(0,f.convert)(30),top:(0,f.convert)(288),height:.2,width:(0,f.convert)(220),backgroundColor:"#CCCCCC"}).drawImage({id:"qrcode",left:(0,f.convert)(30),top:(0,f.convert)(308),height:(0,f.convert)(48),width:(0,f.convert)(48),path:t.qrcode}).drawImage({id:"douyinIcon",left:(0,f.convert)(47),top:(0,f.convert)(325),height:(0,f.convert)(14),width:(0,f.convert)(14),path:"https://p1.dailygn.com/tos-cn-i-8vc7tlzf3c/b2ed061d23714782affb065b6494d91a~tplv-8vc7tlzf3c-raw.png"}).drawWrapText({id:"gamePublisherText",left:(0,f.convert)(86),top:(0,f.convert)(316),text:"游戏发行人计划",fontSize:(0,f.convert)(12),fontStyle:"bold",color:U}).drawWrapText({id:"sloganText",left:(0,f.convert)(86),top:(0,f.convert)(336),text:"来抖音游戏推广平台发视频赚现金",fontSize:(0,f.convert)(10),color:"#B0B0B0"}).drawWrapText({id:"qrcodeText",left:(0,f.convert)(30),top:(0,f.convert)(368),text:"提醒：扫描或长按识别二维码参与游戏任务",fontSize:(0,f.convert)(8),width:(0,f.convert)(188),color:"#B0B0B0"}).draw(m(n.default.mark((function t(){var e,o;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.default.canvasToTempFilePath({canvasId:r,destWidth:(0,f.convert)(560),destHeight:(0,f.convert)(866)});case 3:e=t.sent,console.log("canvasToTempFilePath success -> res",e),p.posterUrl=e.tempFilePath,(0,d.report)("生成分享图片成功"),t.next=16;break;case 9:t.prev=9,t.t0=t.catch(0),o=t.t0.errMsg,p.posterUrl="",v(),(0,s.toast)("生成分享图失败，请稍后再试！"),(0,d.report)("生成分享图片失败",{errMsg:o});case 16:case"end":return t.stop()}}),t,null,[[0,9]])}))));case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.watchEffect)((function(){t.show&&!p.posterUrl&&g()})),h(h({},(0,i.toRefs)(p)),{},{handleCloseClick:v,handleShareClick:function(){r("share",p.posterUrl)}})}};e.default=y},eaf4:function(t,e,r){"use strict";r.r(e);var n=r("2a077"),o=r("13fd");for(var c in o)["default"].indexOf(c)<0&&function(t){r.d(e,t,(function(){return o[t]}))}(c);r("3a50");var a=r("f0c5"),i=Object(a.a)(o.default,n.b,n.c,!1,null,"06f262ef",null,!1,n.a,undefined);e.default=i.exports}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["pages/detail/components/SharePoster-create-component",{"pages/detail/components/SharePoster-create-component":function(t,e,r){r("d1fe").createComponent(r("eaf4"))}},[["pages/detail/components/SharePoster-create-component"]]])}));
//# sourceMappingURL=SharePoster.js.map