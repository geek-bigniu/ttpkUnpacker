define("ttcomponents/wxParse/html2json.js",(function(e,t,r,n,s,o,a,i,l,d,c,p,u,g,m,h,f,v,x,b,y,j,k,w,S,T,z,A,D,P,U,q,E){var I="",C="",H={},O=e("./wxDiscode.js"),R=e("./htmlparser.js"),Y=(F("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),F("br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video")),$=F("abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),B=F("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");F("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),F("wxxxcode-style,script,style,view,scroll-view,block");function F(e){for(var t={},r=e.split(","),n=0;n<r.length;n++)t[r[n]]=!0;return t}function G(e){var t=[];if(0==I.length||!H)return(a={node:"text"}).text=e,n=[a];e=e.replace(/\[([^\[\]]+)\]/g,":$1:");for(var r=new RegExp("[:]"),n=e.split(r),s=0;s<n.length;s++){var o=n[s],a={};H[o]?(a.node="element",a.tag="emoji",a.text=H[o],a.baseSrc=C):(a.node="text",a.text=o),t.push(a)}return t}t.exports={html2json:function(e,t){e=function(e){return e.replace(/\r?\n+/g,"").replace(/<!--.*?-->/gi,"").replace(/\/\*.*?\*\//gi,"").replace(/[ ]+</gi,"<")}(e=function(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<.*!doctype.*\>\n/,"").replace(/<.*!DOCTYPE.*\>\n/,"")}(e)),e=O.strDiscode(e);var r=[],n={node:t,nodes:[],images:[],imageUrls:[]},s=0;return R(e,{start:function(e,o,a){var i,l={node:"element",tag:e,parent:0===r.length?"":r[0].tag};0===r.length?(l.index=s.toString(),s+=1):(void 0===(i=r[0]).nodes&&(i.nodes=[]),l.index=i.index+"."+i.nodes.length);if(Y[e]?l.tagType="block":$[e]?l.tagType="inline":B[e]&&(l.tagType="closeSelf"),0!==o.length&&(l.attr=o.reduce((function(e,t){var r=t.name,n=t.value;return"class"==r&&(console.dir(n),l.classStr=n),"style"==r&&(console.dir(n),l.styleStr=n),n.match(/ /)&&(n=n.split(" ")),e[r]?Array.isArray(e[r])?e[r].push(n):e[r]=[e[r],n]:e[r]=n,e}),{})),"img"===l.tag){l.imgIndex=n.images.length;var d=l.attr.src;""==d[0]&&d.splice(0,1),d=O.urlToHttpUrl(d,"https"),l.attr.src=d,l.from=t,n.images.push(l),n.imageUrls.push(d)}if("font"===l.tag){var c=["x-small","small","medium","large","x-large","xx-large","-webkit-xxx-large"],p={color:"color",face:"font-family",size:"font-size"};for(var u in l.attr.style||(l.attr.style=[]),l.styleStr||(l.styleStr=""),p)if(l.attr[u]){var g="size"===u?c[l.attr[u]-1]:l.attr[u];l.attr.style.push(p[u]),l.attr.style.push(g),l.styleStr+=p[u]+": "+g+";"}}("source"===l.tag&&(n.source=l.attr.src),a)?(void 0===(i=r[0]||n).nodes&&(i.nodes=[]),i.nodes.push(l)):r.unshift(l)},end:function(e){var t=r.shift();if(t.tag!==e&&console.error("invalid state: mismatch end tag"),"video"===t.tag&&n.source&&(t.attr.src=n.source,delete n.source),0===r.length)n.nodes.push(t);else{var s=r[0];void 0===s.nodes&&(s.nodes=[]),s.nodes.push(t)}},chars:function(e){var t={node:"text",text:e,textArray:G(e)};if(0===r.length)t.index=s.toString(),s+=1,n.nodes.push(t);else{var o=r[0];void 0===o.nodes&&(o.nodes=[]),t.index=o.index+"."+o.nodes.length,o.nodes.push(t)}},comment:function(e){}}),n},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/wxParse/emojis/",r=arguments.length>2?arguments[2]:void 0;I=e,C=t,H=r}}}));
//# sourceMappingURL=html2json.js.map